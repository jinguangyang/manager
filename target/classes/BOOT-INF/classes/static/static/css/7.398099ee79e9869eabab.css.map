{"version":3,"sources":["D:/项目管理/售货机/web/web/src/views/pointposition/area/D:/项目管理/售货机/web/web/src/views/pointposition/area/src/views/pointposition/area/edit.vue"],"names":[],"mappings":"AAgKA,kCAAA,UAAA,CAAA,AACA,2BAAA,WAAA,CAAA,AACA,gCAAA,kBAAA,CAAA","file":"7.398099ee79e9869eabab.css","sourcesContent":["<template>\n <div class=\"div-warp\">\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>编辑区域</span>\n        </div>\n        <el-form :model=\"editForm\" :rules=\"Rules\" class=\"formWidth\" ref=\"editForm\" @submit.prevent=\"onSubmit\" >\n          <el-form-item label=\"区域编号\" prop=\"code\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"editForm.code\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"区域名称\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"editForm.name\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"负责人姓名\" prop=\"manager\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"editForm.manager\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"联系方式\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"editForm.mobile\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"商户名称\"  prop=\"corpName\" size=\"small\"  :label-width=\"formLabelWidth\">\n            <el-autocomplete\n              v-model=\"editForm.corpName\"\n              :fetch-suggestions=\"querySearchAsync\"\n              value-key=\"corpName\"\n              placeholder=\"输入搜索公司\"\n              @select=\"handleSelect\"\n\n            ></el-autocomplete>\n          </el-form-item>\n         \n          <el-form-item label=\"描述\"  size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input type=\"textarea\" v-model=\"editForm.description\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"ReturnLevel\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addSubmitForm('editForm')\">确 定</el-button>\n        </div>\n      </el-card>\n  </div>\n</template>\n<script>\nimport {getCompany,editArea} from '@/api/pointposition'\nimport NProgress from 'nprogress'\nexport default {\n  data() {\n        var ValidationCompany = (rule, value, callback) => {\n            if (!value) {\n              return callback(new Error('托管公司不能为空'));\n            }else{\n               callback();\n            }\n        };\n        return {\n          restaurants: [],\n          companyName: '',\n          timeout:  null,\n          formLabelWidth: '120px',\n          Rules:{\n              code:[\n                { required: true, message: '请输入区域编号', trigger: 'blur' },\n                { min: 1, max: 100, message: '长度在 1 到 1000 个字符', trigger: 'blur' }\n              ],\n              name:[\n                 { required: true, message: '请输入区域名称', trigger: 'change' }\n              ], \n              corpName: [\n                 {  required: true, validator: ValidationCompany, trigger: 'change' }\n              ]\n          },\n          editForm: {}\n        }\n  },\n  watch: {\n   \n  },\n  created() {\n    if(window.localStorage){\n        this.editForm = JSON.parse(localStorage.getItem(\"editData\"));\n    }\n  },\n  methods: {\n    ReturnLevel(){\n      this.$router.push(\n              {path:'/pointposition/area'}\n      );\n    },\n    addSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n                      NProgress.start();\n                      let para = Object.assign({}, this.editForm);\n                      editArea(para).then((res) => {\n                            if(res.zhead.reTCode==\"0000\"){\n                            NProgress.done();\n                            this.$notify({\n                              title: '成功',\n                              message: res.zhead.retMsg,\n                              type: 'success'\n                            });\n                            this.$refs['editForm'].resetFields();\n                            this.$router.push(\n                                  {path:'/pointposition/area'}\n                            );\n                            }else{\n                              this.$notify({\n                                title: '失败',\n                                message: res.zhead.retMsg,\n                                type: 'error'\n                              });\n                          }\n                      });\n          });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n   \n    resetForm(formName) {//重置表单\n        this.$refs[formName].resetFields();\n    },\n   \n    querySearchAsync(queryString, cb) {//输入搜索托管公司\n        var restaurants = this.restaurants;\n        var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\n        var _this = this;\n        const listQuery = {\n          corpName:_this.companyName\n        }\n        getCompany(listQuery).then(response => {\n          _this.restaurants = response.zbody.datas\n          cb(results);\n        })\n    },\n    createStateFilter(queryString) {\n        return (state) => {\n          return (state.corpName.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n        };\n    },\n    handleSelect(item) {\n        this.editForm.corpId = item.corpId\n        this.editForm.corpName = item.corpName\n        console.log(item);\n    }\n   \n  },\n\n  mounted () {\n   \n \n  },\n  components: {\n\n  }\n}\n</script>\n<style scoped>\n  .el-autocomplete{width:100%;}\n  .div-warp{margin: 20px;}\n  .dialog-footer{ padding-left:120px;  }\n</style>"]}