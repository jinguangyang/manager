{"version":3,"sources":["D:/项目管理/售货机/web/web/src/views/equipment/machine/D:/项目管理/售货机/web/web/src/views/equipment/machine/src/views/equipment/machine/cabinetForm.vue","D:/项目管理/售货机/web/web/src/views/equipment/machine/D:/项目管理/售货机/web/web/src/views/equipment/machine/src/views/equipment/machine/add.vue"],"names":[],"mappings":"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","file":"15.aea0b92206e6d72a5673.css","sourcesContent":["<template>\n <div>\n        <el-form :model=\"addForm\" :rules=\"Rules\" class=\"formWidth\"   ref=\"addForm\" @submit.prevent=\"onSubmit\">\n          <el-form-item label=\"货柜名称\" prop=\"area_id\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.area_id\" ></el-input>\n          </el-form-item>\n          <el-form-item label=\"售后机名称\" prop=\"area\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.area\" auto-complete=\"off\"  ></el-input>\n          </el-form-item>\n          <el-form-item label=\"外挂\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option label=\"张三\" value=\"shanghai\"></el-option>\n              <el-option label=\"李四\" value=\"beijing\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"串口号\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option label=\"张三\" value=\"shanghai\"></el-option>\n              <el-option label=\"李四\" value=\"beijing\"></el-option>\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"厂家\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option label=\"张三\" value=\"shanghai\"></el-option>\n              <el-option label=\"李四\" value=\"beijing\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"货柜类型\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option label=\"张三\" value=\"shanghai\"></el-option>\n              <el-option label=\"李四\" value=\"beijing\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"机型\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option label=\"张三\" value=\"shanghai\"></el-option>\n              <el-option label=\"李四\" value=\"beijing\"></el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <div style=\"margin:40px 0 100px 10px;\"><el-button type=\"danger\">配置货道</el-button></div>\n  </div>\n</template>\n<script>\n\nexport default {\n  data() {\n        return {\n          editableTabsValue: '2',\n          editableTabs: [{\n            title: 'Tab 1',\n            name: '1',\n            content: 'Tab 1 content'\n          }, {\n            title: 'Tab 2',\n            name: '2',\n            content: 'Tab 2 content'\n          }],\n          tabIndex: 2,\n          input10:\"\",\n          options:[],\n          value:\"\",\n          innerVisible:false,\n          input:'',\n          checkAll: false,\n          checkedCities: ['上海', '北京'],\n          isIndeterminate: true,\n          currentDate: new Date(),\n          dialogFormVisible:false,\n          radio10: '1',\n          restaurants: [],\n          state4: '',\n          timeout:  null,\n          formLabelWidth: '120px',\n          addForm: {\n              area_id:'',\n              name:'',\n              contact:'',\n              region: '',\n              area: '',\n              date2: '',\n              delivery: false,\n              type: [],\n              resource: '',\n              desc: ''\n          },\n          Rules:{\n              area_id:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ],\n              area:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ]\n              ,\n              name:[\n                 { required: true, message: '请选择活负责人姓名', trigger: 'change' }\n              ],\n              contact:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ]\n          },\n          editForm: {\n              area_id:'',\n              name:'',\n              contact:'',\n              region: '',\n              area: '',\n              date2: '',\n              delivery: false,\n              type: [],\n              resource: '',\n              desc: ''\n          }\n        }\n  },\n  watch: {\n   \n  },\n  methods: {\n\n  },\n\n  mounted () {\n   \n  },\n  components: {\n  }\n}\n</script>\n<style scoped>\n.icon-size-circle{ font-size: 60px; color:red; margin-top: 50px;}\n.pageBox{background: #fff; margin-top: 30px;}\n.add-class{width:100%; height: 168px; text-align: center;}\n.icon-size{ font-size: 60px; color:#efefef; margin-top: 50px; cursor: pointer;}\n.icon-size:hover{color:#006CC1;}\n.layerbottom{text-align: center; overflow: hidden; padding:30px 0;}\n.input-left{width:70px;float:left;}\n.input-right{width:70px;float:right;}\n.block-top{background: #efefef; overflow: hidden;}\n.block-top .delBnt{float: right;  margin-right:4px;}\n.block-top .checkbox-left{float: left; margin-top: 4px; margin-left: 4px;}\n.price {\n    font-size: 13px;\n    color: #999; margin-top: 10px;\n  }\n  .price i{ color:#F56C6C; font-size:20px; }\n  .titles {\n    font-size: 14px; margin-top: 10px;\n    color: #333;\n  }\n  .bottom {\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    width: 100%;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n      display: table;\n      content: \"\";\n  }\n  \n  .clearfix:after {\n      clear: both\n  }\n.imgStyel{}\n.imgStyel img{width: 100%; display: block;}\n.layerBox{padding:0 30px; min-width: 1200px;}\n  .bntBox{text-align: center; margin-top: 30px;}\n  .top-20{ margin-top: 20px; }\n  .inputStyle{width:215px;}\n  .el-autocomplete{width:100%;}\n  .div-warp{}\n  .dialog-footer{ padding-left:120px;  }\n  .searchBox{ padding: 0; }\n  .searchBox strong{ display: inline-block;float: left; line-height: 35px; font-size:14px; font-weight: normal; }\n  .searchBox .inputStyle{width: 200px; display: inline-block;float:left; margin-right: 15px; }\n  .el-dialog__header{border-bottom: 1px solid #000}\n</style>","<template>\n <div class=\"div-warp\">\n      <!-- 具体的货到配置弹层 -->\n        <el-dialog\n              width=\"970px\"\n              title=\"配置货道\"\n              :visible.sync=\"innerVisible\"\n              append-to-body>\n                  <el-dialog\n                    width=\"920px\"\n                    title=\"商品列表\"\n                    :visible.sync=\"PlistVisible\"\n                    append-to-body>\n\n                    <div class=\"searchBox\">\n                        <strong>所有分类：</strong>\n                        <el-select v-model=\"value\" size=\"mini\" class=\"inputStyle1\" placeholder=\"请选择分类\">\n                          <el-option\n                            v-for=\"item in options\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                          </el-option>\n                        </el-select>\n                         <!-- <strong> 商品名称：</strong>\n                           <el-select v-model=\"value\" size=\"mini\" class=\"inputStyle1\" placeholder=\"请选择/可搜索\">\n                          <el-option\n                            v-for=\"item in options\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                          </el-option>\n                        </el-select> -->\n                        <el-input placeholder=\"请输入商品名称\" v-model=\"input10\" style=\"width:150px;\" size=\"mini\" clearable>\n                          </el-input>\n                          <el-button type=\"success\" @click.native.prevent=\"search\" size=\"mini\">查询</el-button>\n                    </div>\n\n                        <el-row :gutter=\"24\" style=\"margin-top: 10px\">\n                          <el-col :span=\"24\" style=\"margin-top: 20px;\" >\n                              <div class=\"imgStyel1\" v-for=\"o in cocmodityList\" @click=\"selectGoods(o)\">\n                                <div class=\"Pic-box\">\n                                <img :src=\"o.pic\" >\n                                </div>\n                                <div class=\"bottom1\">\n                                  <div class=\"titles1\">{{o.fullName}}</div>\n                                  <div class=\"price1\">售价：¥<i>{{o.salePrice}}</i></div>\n                                </div>\n                              </div>\n                             \n                         \n                          </el-col>\n                        </el-row>\n                    <div class=\"pageBox\">\n                      <el-pagination\n                        background\n                        layout=\"prev, pager, next\"\n                        :total=\"1000\">\n                      </el-pagination>\n                    </div>\n        </el-dialog>\n        <div style=\"position:relative; overflow:hidden;\">\n             <!--  <div>\n                <el-button-group>\n                <el-button type=\"primary\"  size=\"mini\">1.2324(饮料机)</el-button>\n                <el-button type=\"primary\"  size=\"mini\">1.2324(弹簧机11)</el-button>\n                </el-button-group>\n              </div> -->\n              <el-checkbox-group v-model=\"checkedCities\" @change=\"handleCheckedCitiesChange_hd\">\n                  <el-row :gutter=\"24\">\n                    <el-col :span=\"24\" v-for=\"(row,index) in vendingModeData.rows\" >\n\n                        <div class=\"imgStyel\"  v-for=\"clo in row.cols\">\n                                <!-- 操作区域 -->\n                                <div class=\"block-top\"> \n                                  <el-checkbox :label=\"clo\" :key=\"clo.id\" class=\"checkbox-left\">{{clo.name}}</el-checkbox>\n\n                                  <el-button type=\"text\" class=\"delBnt\" size=\"mini\" @click=\"del_hd(clo)\">删除</el-button>\n                                </div>\n                            \n                                <!-- 添加按钮 -->\n                                <div  class=\"add-class blockBox\" v-if=\"clo.lanep.laneSate=='1'\" >\n                                  <i class=\"el-icon-circle-plus-outline icon-size\"  @click=\"add_hd(clo)\" ></i>\n                                </div>\n                                  \n\n                                <!-- 禁用 -->\n                                <div v-else-if=\"clo.lanep.laneSate =='2'\" class=\"add-class blockBox\">\n                                    <i class=\"el-icon-circle-close-outline icon-size-circle\"></i>\n                                </div>\n\n\n                                <!-- 有商品 -->\n                                <div else class=\"blockBox\" else>\n                                      <img :src=\"clo.lanep.productPic\" >\n                                      <div class=\"bottom clearfix\">\n                                        <div class=\"titels\">{{clo.lanep.title}}</div>\n                                        <div class=\"price\"> ¥<i>{{clo.lanep.salePrice}}</i></div>\n                                      </div>\n                                      <div class=\"InputFStyle\" >\n                                          <el-input v-model=\"clo.lanep.capacity\" size=\"mini\" class=\"i1\" placeholder=\"容量\"></el-input>\n                                          <el-input v-model=\"clo.lanep.warnCap\" size=\"mini\" class=\"i2\" placeholder=\"阀值\"></el-input>\n                                      </div>\n                                </div>\n                        </div>\n\n                    </el-col>\n                  </el-row>\n              </el-checkbox-group>\n\n\n              <div slot=\"footer\" class=\"Bnt-footer\">\n                    <el-checkbox :indeterminate=\"isIndeterminate\" style=\"float:left; margin: 4px 10px 0 0;\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n                    <el-button @click=\"hd_cancel\" size=\"mini\">取 消</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"enableUp\">启用</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"disableUp\">禁用</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"dialogFormVisible = false\">选择模版</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"dialogFormVisible = false\">生成模版</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"innerVisible = false\">保存</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"innerVisible = false\">保存并下发</el-button>\n              </div>\n         </div>\n        </el-dialog>\n      <!-- 具体的货到配置弹层 end -->\n\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>新增售货机</span>\n        </div>\n          <el-form :model=\"addForm\" :rules=\"Rules\" class=\"formWidth\"  ref=\"addForm\" @submit.prevent=\"onSubmit\">\n        <el-tabs v-model=\"editableTabsValue\" type=\"card\" closable @tab-remove=\"removeTab\" >\n           <el-tab-pane label=\"主柜信息\" name=\"1\">\n                  <!-- 主柜 -->\n                          <el-form-item label=\"售货机编号\" prop=\"siteCode\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-input v-model=\"addForm.siteCode\" ></el-input>\n                          </el-form-item>\n                          <el-form-item label=\"售货机名称\" prop=\"siteName\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-input v-model=\"addForm.siteName\" auto-complete=\"off\"  ></el-input>\n                          </el-form-item>\n                          <el-form-item label=\"厂家\" prop=\"factoryId\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.factoryId\" size=\"small\" placeholder=\"请选择厂家\">\n                                <el-option\n                                  v-for=\"item in ManufactorOptions\"\n                                  :key=\"item.dictCode\"\n                                  :label=\"item.dictLabel\"\n                                  :value=\"item.dictCode\">\n                                </el-option>\n                            </el-select>\n                          </el-form-item>\n                          <el-form-item label=\"货柜类型\" prop=\"cabinetType\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.cabinetType\" size=\"small\" placeholder=\"请选择货柜类型\">\n                               <el-option\n                                  v-for=\"item in CabinetOptions\"\n\n                                  :key=\"item.dictCode\"\n                                  :label=\"item.dictLabel\"\n                                  :value=\"item.dictCode\">\n                                </el-option>\n                            </el-select>\n                          </el-form-item>\n\n                          <el-form-item label=\"机型\" prop=\"deviceId\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.deviceId\"   @change=\"changeDevice\" size=\"small\" placeholder=\"请选择机型\">\n                              <el-option\n                                  v-for=\"item in modelOptions\"\n                                  :key=\"item.deviceId\"\n                                  :label=\"item.deviceId\"\n                                  :value=\"item.deviceId\">\n                              </el-option>\n                            </el-select>\n                          </el-form-item>\n                          \n\n                          <el-form-item label=\"点位\"  prop=\"pointId\" size=\"small\"  :label-width=\"formLabelWidth\">\n                            <el-autocomplete\n                              v-model=\"addForm.name\"\n                              :fetch-suggestions=\"querySearchAsync\"\n                              value-key=\"name\"\n                              placeholder=\"输入搜索点位\"\n                              @select=\"handleSelect\"\n\n                            ></el-autocomplete>\n                          </el-form-item>\n                          <el-form-item label=\"网络类型\" prop=\"netWork\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.netWork\" size=\"small\" placeholder=\"请选择负责人姓名\">\n                              <el-option\n                                  v-for=\"item in networkOptions\"\n                                  :key=\"item.dictValue\"\n                                  :label=\"item.dictLabel\"\n                                  :value=\"item.dictValue\">\n                              </el-option>\n                            </el-select>\n                          </el-form-item>\n                          <el-form-item label=\"售卖状态\" prop=\"sellState\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.sellState\" size=\"small\" placeholder=\"请选择负责人姓名\">\n                              <el-option\n                                  v-for=\"item in stateOptions\"\n                                  :key=\"item.dictValue\"\n                                  :label=\"item.dictLabel\"\n                                  :value=\"item.dictValue\">\n                              </el-option>\n                            </el-select>\n                          </el-form-item>\n                          <el-form-item label=\"支付方式\" size=\"small\" :label-width=\"formLabelWidth\">\n\n                             <el-checkbox-group v-model=\"palychek\" @change=\"handleCheckedCitiesChange\">\n                              <el-checkbox label=\"1\">支付宝</el-checkbox>\n                              <el-checkbox label=\"2\">微信</el-checkbox>\n                              <el-checkbox label=\"3\">现金</el-checkbox>\n\n                            </el-checkbox-group>\n                          </el-form-item>\n                          <el-form-item label=\"视频播放\"  size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-radio-group v-model=\"addForm.mediaType\" size=\"mini\" >\n                              <el-radio label=\"1\" border>支持</el-radio>\n                              <el-radio label=\"2\" border>不支持</el-radio>\n                            </el-radio-group>\n                          </el-form-item>\n\n                         \n                  <!-- 主柜结束 -->\n                   <div style=\"margin:40px 0 100px 10px;\">\n                    <el-button type=\"danger\" :disabled=\"disabled\" @click=\"getvendingModel\">配置货道</el-button>\n                  </div>\n\n           </el-tab-pane>\n\n\n\n          <el-tab-pane\n            v-for=\"(item, index) in addForm.cabinets\"\n            :key=\"item.name\"\n            :label=\"item.title\"\n            :name=\"item.name\"\n          >\n\n          <!-- 副柜表单  -->\n           <template  scope=\"scope\">\n                <el-form-item label=\"货柜编号\"  prop=\"area_id\" size=\"small\" :label-width=\"formLabelWidth\">\n                  <el-input v-model=\"item.deviceId\" class=\"inputStyle\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"货柜名称\" prop=\"area\" size=\"small\" :label-width=\"formLabelWidth\">\n                  <el-input v-model=\"addForm.area\" auto-complete=\"off\"  class=\"inputStyle\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"外挂\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n                  <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择外挂\">\n                    <el-option label=\"外挂1\" value=\"shanghai\"></el-option>\n                    <el-option label=\"外挂2\" value=\"beijing\"></el-option>\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"串口号\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n                  <el-select v-model=\"addForm.name\" size=\"small\" placeholder=\"请选择串口号\">\n                    <el-option label=\"1-12-3\" value=\"shanghai\"></el-option>\n                    <el-option label=\"2-39-4\" value=\"beijing\"></el-option>\n                  </el-select>\n                </el-form-item>\n\n                <el-form-item label=\"厂家\" prop=\"factoryId\" size=\"small\" :label-width=\"formLabelWidth\">\n                        <el-select v-model=\"addForm.factoryId\" size=\"small\" placeholder=\"请选择厂家\">\n                            <el-option\n                              v-for=\"item in ManufactorOptions\"\n                              :key=\"item.dictCode\"\n                              :label=\"item.dictLabel\"\n                              :value=\"item.dictCode\">\n                            </el-option>\n                        </el-select>\n                </el-form-item>\n                <el-form-item label=\"货柜类型\" prop=\"cabinetType\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.cabinetType\" size=\"small\" placeholder=\"请选择负责人姓名\">\n                               <el-option\n                                  v-for=\"item in CabinetOptions\"\n\n                                  :key=\"item.dictCode\"\n                                  :label=\"item.dictLabel\"\n                                  :value=\"item.dictCode\">\n                                </el-option>\n                            </el-select>\n                </el-form-item>\n                <el-form-item label=\"机型\" prop=\"deviceId\" size=\"small\" :label-width=\"formLabelWidth\">\n                            <el-select v-model=\"addForm.deviceId\"   @change=\"changeDevice\" size=\"small\" placeholder=\"请选择机型\">\n                              <el-option\n                                  v-for=\"item in modelOptions\"\n                                  :key=\"item.deviceId\"\n                                  :label=\"item.deviceId\"\n                                  :value=\"item.deviceId\">\n                              </el-option>\n                            </el-select>\n                </el-form-item>\n              <div style=\"margin:40px 0 100px 10px;\" data-form = \"item.name\">\n                    <el-button type=\"danger\"  @click=\"getvendingModel(item)\">配置货道</el-button>\n              </div>\n\n           </template>\n                \n          <!-- 副柜表单end -->\n          <!--  <cabinet></cabinet> -->\n          </el-tab-pane>\n        </el-tabs>\n        </el-form>\n      </el-card>\n\n      <div class=\"bntBox\">\n         <el-button   @click=\"addTab(editableTabsValue)\">新增挂载柜</el-button>\n          <el-button @click=\"dialogAddTableVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addSubmitForm('addForm')\">提交</el-button>\n      </div>\n  </div>\n</template>       \n\n<script>\nimport cabinet from './cabinetForm'\nimport { addMachine,getMachineSelect,getVendingModel,getPositionList,vendingModelList,getCommodity } from '@/api/equipment'\nimport NProgress from 'nprogress'\n\nexport default {\n  data() {\n        return {\n          // 厂家、货柜类型、网络类型、售卖状态查询接口\n          cocmodityList:[],//商品列表\n          hdList:{},//cols,\n          isProduct:1,//临时使用\n          isProhibit:-1,//临时使用\n          isIndeterminate: true,\n          vendingModeData:{},//货到行和列的数据\n     \n          checkedCities: [],\n\n          checkAll: false,\n          disabled:true,\n          input10:'',\n          isD:2,//临时使用\n          PlistVisible:false,\n          innerVisible:false,\n          editableTabsValue: '1',\n          editableTabs: [],\n          tabIndex: 1,\n          ManufactorOptions:[],//厂家列表---下拉\n          CabinetOptions:[],//货柜类型---下拉\n          stateOptions:[],//售卖状态--下拉\n          networkOptions:[],//网络--下拉\n          modelOptions:[],//机型希腊\n          options:[],\n          palychek:[],\n          restaurants:[],//点位\n          companyName: '',\n          value:\"\",\n          input:'',\n          formLabelWidth: '120px',\n          addForm1:{},\n          addForm: {\n            siteCode:\"\",  //售货机编码\n            siteName:\"\",  // 售货机名称\n            factoryId:\"\", // 厂家编号\n            cabinetType:\"\", // 货柜类型 01:商店机 02:弹簧机 03:格子机\n            deviceId:\"\",  // 机型编码\n            pointId:\"\", // pointId\n            payType:\"\", //支付类型\n            mediaType:1, // 播放视频 1:支持 2:无\n            netWork:1,  // 网络制式 1:GPRS  2:网口\n            sellState:1,  // 售卖状态 1:可售卖 2:不可售卖\n            description:\"\", // 描述\n            lanes:[],//主柜子货到\n            cabinets:[  // 副柜\n              \n            ]\n          },\n          cabinetsObj: {\n                hangType:\"\", //外挂类型 1:是cabinetsObj 2:否\n                pointCode:\"\", // 串口号\n                factoryId:\"\", // 厂家编号\n                cabinetType:\"\", // 货柜类型 01:商店机 02:弹簧机 03:格子机\n                deviceId:\"\", // 机型编码\n                lanes:[ // 货道\n                {\n                  laneId:1, // 货道编号(从左到右、从上到下)\n                  row:1, // 行数\n                  col:1,  // 列数\n                  arrange:1,  // 排数\n                  lanep: {  // 货道商品\n                    laneSId:1,  // 货道开始编号(一个商品占多个货道)\n                    laneEId:2, // 货道结束编号(如果只有一个商品则只有开始货道编号)\n                    productId:\"\", //商品编号\n                    productPic:\"\",  // 商品图片\n                    salePrice:\"\", // 售卖价格\n                    capacity:12,  // 存放容量\n                    warnCap:3,  // 缺货阈值\n                    laneSate:\"1\"  // 货道状态 1:正常 2:停用\n                  }\n                }\n                ]\n          },\n          lanes:[],\n          Rules:{\n              siteCode:[\n                { required: true, message: ' ', trigger: 'change' }\n              ],\n              siteName:[\n                { required: true, message: ' ', trigger: 'change' }\n              ],\n              dictLabel:[\n                { required: true, message: ' ', trigger: 'change' },\n               \n              ],\n              factoryId:[\n                { required: true, message: ' ', trigger: 'change' },\n              ],\n              cabinetType:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              netWork:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              sellState:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              deviceId:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              pointId:[\n                { required: true, message: ' ', trigger: 'change' },\n              ]\n          },\n          hd_id:'',\n          hd_dx:[],//单选临时存放\n          select_hd_list:[],//最终拼接的货道数据\n          hd_all:[],\n         \n        }\n  },\n  watch: {\n   \n  },\n  methods: {\n    enableUp(){//启用\n        var _this = this;\n        this.vendingModeData.rows.forEach(function(row){\n            for(var i =0; i<row.cols.length; i++){\n              for(var j=0; j<_this.checkedCities.length; j++){\n                    if(_this.checkedCities[j].laneId==row.cols[i].laneId){\n                        row.cols[i].lanep.laneSate= \"1\"\n                        _this.checkedCities[j].lanep.laneSate = \"1\"\n                        _this.checkedCities.splice(j--,1)\n                    }\n              }\n            }\n        })\n    },\n    disableUp(){//禁用\n        var _this = this;\n        this.vendingModeData.rows.forEach(function(row){\n            for(var i =0; i<row.cols.length; i++){\n              for(var j=0; j<_this.checkedCities.length; j++){\n                    if(_this.checkedCities[j].laneId==row.cols[i].laneId){\n                        row.cols[i].lanep.laneSate = \"2\"\n                        _this.checkedCities[j].lanep.laneSate = \"2\"\n                    }\n              }\n            }\n        })\n    },\n    add_hd(row){\n      this.hd_id = row.laneId\n      this.PlistVisible = true\n    },\n    selectGoods(data){//选择货到商品\n      var _this =this;\n      _this.vendingModeData.rows.forEach(function(row,index){//便利所有货到找到选择的货到并赋值\n          for(var i = 0; i<row.cols.length; i++){\n              if(_this.hd_id == row.cols[i].laneId){\n                  row.cols[i].lanep.title= data.fullName\n                  row.cols[i].lanep.laneSate = 3\n                  row.cols[i].lanep.salePrice= data.salePrice\n                  row.cols[i].lanep.productPic= data.productPic\n                  //_this.select_hd_list.push(row.cols[i])\n                  _this.checkedCities.push(row.cols[i])\n\n              }\n          }\n      })\n      console.log(\"最终数据：：\",_this.checkedCities)\n      this.PlistVisible = false;\n     \n    },\n    del_hd(data){//删除本地货道商品\n      var _this =this;\n      _this.vendingModeData.rows.forEach(function(row,index){//便利所有货到找到选择的货到并赋值\n          for(var i = 0; i<row.cols.length; i++){\n              if(data.laneId == row.cols[i].laneId){\n                  row.cols[i].lanep.laneSate = 1\n              }\n          }\n      })\n      for (var i = 0; i< _this.checkedCities.length; i++) {\n            if(data.laneId ==_this.checkedCities[i].laneId ){\n                _this.checkedCities.splice(i--,1)\n            }\n      }\n      console.log(_this.checkedCities)\n      this.isProduct = 1;\n    },\n    hd_cancel(){\n        var _this = this;\n        this.$confirm('确认要放弃配置吗？', '提示', {}).then(() => {\n          _this.innerVisible = false\n          _this.vendingModeData.rows.forEach(function(row,index){\n            for(var i = 0; i<row.cols.length; i++){\n                    row.cols[i].lanep.laneSate = 1\n            }\n          })\n          _this.checkedCities = []\n        })\n    },\n    //新增tab\n    addTab(targetName) {\n      localStorage.setItem(\"cabinetsData\"+targetName,JSON.stringify(this.cabinetsObj))\n      //this.addForm.cabinets.push()\n        let _this =this;\n        let newTabName = ++this.tabIndex + '';\n        this.addForm.cabinets.push({\n          title: '挂载柜'+newTabName,\n          name: newTabName,\n          addform:\"addForm\"+newTabName,\n          //副柜信息\n          hangType:\"1\", //外挂类型 1:是cabinetsObj 2:否\n          pointCode:\"\", // 串口号\n          factoryId:\"\", // 厂家编号\n          cabinetType:\"\", // 货柜类型 01:商店机 02:弹簧机 03:格子机\n          deviceId:\"码\", // 机型编码\n          lanes:[ // 货道\n          {\n            laneId:1, // 货道编号(从左到右、从上到下)\n            row:1, // 行数\n            col:1,  // 列数\n            arrange:1,  // 排数\n            lanep: {  // 货道商品\n              laneSId:1,  // 货道开始编号(一个商品占多个货道)\n              laneEId:2, // 货道结束编号(如果只有一个商品则只有开始货道编号)\n              productId:\"\", //商品编号\n              productPic:\"\",  // 商品图片\n              salePrice:\"\", // 售卖价格\n              capacity:12,  // 存放容量\n              warnCap:3,  // 缺货阈值\n              laneSate:\"1\"  // 货道状态 1:正常 2:停用\n            }\n          }\n          ]\n\n\n\n\n        });\n        this.editableTabsValue = newTabName;\n    },\n    //减少tab\n    removeTab(targetName) {\n        localStorage.removeItem(\"cabinetsData\"+targetName)\n\n        let tabs = this.editableTabs;\n        let activeName = this.editableTabsValue;\n        if (activeName === targetName) {\n          tabs.forEach((tab, index) => {\n            if (tab.name === targetName) {\n              let nextTab = tabs[index + 1] || tabs[index - 1];\n              if (nextTab) {\n                activeName = nextTab.name;\n              }\n            }\n          });\n        }\n        \n        this.editableTabsValue = activeName;\n        this.editableTabs = tabs.filter(tab => tab.name !== targetName);\n    },\n    handleCheckedCitiesChange(value) {\n        this.addForm.payType = value.join(',')\n    },\n    addSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n               NProgress.start();\n                      let para = Object.assign({}, this.addForm);\n                      para.lanes = this.checkedCities\n                      addMachine(para).then((res) => {\n                            if(res.zhead.reTCode==\"0000\"){\n                            NProgress.done();\n                            this.$notify({\n                              title: '成功',\n                              message: res.zhead.retMsg,\n                              type: 'success'\n                            });\n                            this.$refs['addForm'].resetFields();\n                            this.$router.push(\n                                  {path:'/equipment/machine/index'}\n                            );\n                            }else{\n                              this.$notify({\n                                title: '失败',\n                                message: res.zhead.retMsg,\n                                type: 'error'\n                              });\n                          }\n                      });\n          });\n            //this.dialogAddTableVisible = false\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n   \n    resetForm(formName) {//重置表单\n        this.$refs[formName].resetFields();\n    },\n\n    getMachineSelectList(type) {\n      var _this = this;\n      const listQuery = {\n        dictType:type,\n      }\n      getMachineSelect(listQuery).then(response => {\n         if(response.zhead.reTCode===\"0000\"){\n         \n          NProgress.done();\n          /*\n          字典类型,厂商：sys_factory；货柜类型sys_cabinet_type；网络类型：sys_net_work；售卖状态：sys_sell_state\n          */ \n\n          if(type===\"sys_factory\")\n          {\n            _this.ManufactorOptions= response.zbody.datas.rows;//厂家列表---下拉\n             console.log(\"厂家列表：：\",_this.ManufactorOptions)\n          }\n          else if(type===\"sys_cabinet_type\")\n          {\n             _this.CabinetOptions= response.zbody.datas.rows;//货柜类型---下拉\n             console.log(\"货柜类型：：\",_this.CabinetOptions)\n          }\n          else if(type===\"sys_net_work\")\n          {\n              _this.networkOptions= response.zbody.datas.rows;//网络类型---下拉\n              console.log(\"网络类型：：\",_this.networkOptions)\n          }\n          else if(type===\"sys_sell_state\")\n          {\n             _this.stateOptions= response.zbody.datas.rows;//售卖状态--下拉\n             console.log(\"售卖状态：：\",_this.stateOptions)\n          }\n         }else{\n             this.$notify({\n              title: '失败',\n              message: res.zhead.retMsg,\n              type: 'error'\n            });\n         }\n      })\n    },\n    //机型查询接口\n    getModel(){\n      var _this = this;\n      const listQuery = {\n      }\n      getVendingModel(listQuery).then(response => {\n           if(response.zhead.reTCode===\"0000\"){\n            _this.modelOptions=response.zbody.datas.rows\n            console.log(\"机型：：\",response.zbody.datas.rows)\n            NProgress.done();\n           }else{\n               this.$notify({\n                title: '失败',\n                message: res.zhead.retMsg,\n                type: 'error'\n              });\n           }\n        })\n    },\n    changeDevice(){\n      this.disabled = false\n    },\n    //获取一个机型里的货道查询接口\n    getvendingModel(row){\n      debugger\n      var _this = this;\n      this.innerVisible = true\n      const listQuery = {\n        logid:_this.addForm.deviceId\n      }\n      vendingModelList(listQuery).then(response => {\n           if(response.zhead.reTCode===\"0000\"){\n            //_this.modelOptions=response.zbody.datas.rows\n            _this.vendingModeData = response.zbody.datas\n\n\n            _this.vendingModeData.rows.forEach(function(row,index){\n              for(var i = 0; i<row.cols.length; i++){\n                 _this.hd_all.push(row.cols[i])\n              }\n\n            })\n            console.log(\"全部货到\",_this.hd_all)\n\n\n\n\n            console.log(\"一个机型里的货道：：\",response.zbody.datas)\n            NProgress.done();\n           }else{\n               this.$notify({\n                title: '失败',\n                message: res.zhead.retMsg,\n                type: 'error'\n              });\n           }\n        })\n    },\n    querySearchAsync(queryString, cb) {//输入搜索点位\n        var restaurants = this.restaurants;\n        var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\n        var _this = this;\n        const listQuery = {\n          name:_this.companyName\n        }\n        getPositionList(listQuery).then(response => {\n          \n          _this.restaurants = response.zbody.datas.rows\n          console.log(_this.restaurants)\n          cb(results);\n        })\n    },\n    createStateFilter(queryString) {\n        return (state) => {\n          return (state.name.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n        };\n    },\n    handleSelect(item) {\n        this.addForm.pointId = item.pointId\n        this.addForm.pointName = item.name\n        console.log(item.pointId);\n    },\n      // 货到\n    handleCheckAllChange(val) {//全选\n      this.checkedCities = val ? this.vendingModeData.rows : [];\n      this.isIndeterminate = false;\n    },\n    handleCheckedCitiesChange_hd(value) {//单选\n      let checkedCount = value.length;\n      this.checkAll = checkedCount === this.vendingModeData.rows.length;\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.vendingModeData.rows.length;\n\n\n    },\n    //查询商品列表\n    getCommodityList(){\n      var _this = this;\n      const listQuery = {\n        typeId:'',\n        name:'',\n        productCode:''\n      }\n      getCommodity(listQuery).then(response => {\n           if(response.zhead.reTCode===\"0000\"){\n            _this.cocmodityList=response.zbody.datas.rows\n            console.log(\"商品列表：：\",response.zbody.datas.rows)\n            NProgress.done();\n           }else{\n               this.$notify({\n                title: '失败',\n                message: res.zhead.retMsg,\n                type: 'error'\n              });\n           }\n        })\n    },\n  },\n\n  mounted () {\n        this.getMachineSelectList(\"sys_factory\")\n        this.getMachineSelectList(\"sys_cabinet_type\")\n        this.getMachineSelectList(\"sys_net_work\")\n        this.getMachineSelectList(\"sys_sell_state\")\n        this.getModel()\n        this.getCommodityList()\n  },\n  components: {\n    cabinet\n  }\n}\n</script>\n<style scoped>\n.bntBox{ margin-top:50px;}\n.icon-size-circle{ font-size: 60px; color:red; margin-top: 50px;}\n.pageBox{background: #fff; margin-top: 30px;}\n.add-class{width:100%; height: 168px; text-align: center;}\n.icon-size{ font-size: 60px; color:#efefef; margin-top: 50px; cursor: pointer;}\n.icon-size:hover{color:#006CC1;}\n.layerbottom{text-align: center; overflow: hidden; padding:30px 0;}\n.input-left{width:70px;float:left;}\n.input-right{width:70px;float:right;}\n.block-top{background: #efefef; overflow: hidden;}\n.block-top .delBnt{float: right;  margin-right:4px;}\n.block-top .checkbox-left{float: left; margin-top: 4px; margin-left: 4px;}\n\n.imgStyel{width:145px; height:145px; float:left; margin:5px 5px; border:1px solid #dddddd; border-radius:5px; overflow:hidden; padding:5px; }\n.imgStyel:hover{border:1px solid #006BC2}\n.imgStyel img{width:50px; height:50px; display: block; float:left; margin:5px 0 0 0;}\n\n.layerBox{padding:0 30px; }\n  .top-20{ margin-top: 20px; }\n  .inputStyle{width:215px;}\n  .el-autocomplete{width:100%;}\n  .div-warp{margin: 20px;}\n  .dialog-footer{ padding-left:120px;  }\n  .searchBox{ padding: 0; }\n  .searchBox .inputStyle{width: 200px; display: inline-block;float:left; margin-right: 15px; }\n  .el-dialog__header{border-bottom: 1px solid #000}\n  .add-class{width:100%;  text-align: center;}\n.icon-size{ font-size: 60px; color:#efefef; margin-top: 20px; cursor: pointer;}\n.icon-size:hover{color:#006CC1;}\n.layerbottom{text-align: center; overflow: hidden; padding:30px 0; }\n.icon-size-circle{ font-size: 60px; color:red; margin-top: 20px;}\n.blockBox{ cursor:pointer}\n.price {\n    font-size: 13px;\n    color: #999; margin-top: 10px;\n  }\n  .price i{ color:#F56C6C; font-size:20px; }\n  .titles {\n    font-size: 14px; margin-top: 10px;\n    color: #333;\n  }\n.bottom {width:75px;line-height: 12px; float:right; display:inline-block; margin-top:5px;}\n\n.bottom .titels{font-size:12px;color:#333; line-height:16px;}\n.InputFStyle{width:100%;float:left; margin-top:10px;}\n.InputFStyle .i1{width:60px; float:left;}\n.InputFStyle .i2{width:60px; float:right;}\n\n\n\n.imgStyel1{width:100px;  float:left; margin:5px 5px; cursor:pointer; border:1px solid #dddddd; border-radius:5px; overflow:hidden; padding:5px; }\n.imgStyel1 .Pic-box{height:60px; overflow:hidden;}\n.imgStyel1 img{width:100%; display: block; float:left; }\n\n.bottom1 {line-height: 12px;}\n\n.bottom1 .titels1{font-size:12px;color:#333;}\n\n.price1 {\n    font-size: 13px;\n    color: #999; margin-top: 5px;\n  }\n  .price1 i{ color:#F56C6C; font-size:20px; }\n  .titles1 {\n    font-size: 12px; margin-top: 5px; line-height:20px;\n    color: #333;\n  }\n  .Bnt-footer{padding:10px 0 0 0;}\n</style>"]}