{"version":3,"sources":["webpack:///./src/views/sitemap/index.vue?fdf0","webpack:///./src/api/pointposition.js","webpack:///./src/views/sitemap/index.vue?3252","webpack:///./src/views/sitemap/index.vue?ad33","webpack:///./src/views/sitemap/index.vue?749f","webpack:///src/views/sitemap/index.vue","webpack:///./src/views/sitemap/index.vue"],"names":["base","getList","params","Object","_utils_request__WEBPACK_IMPORTED_MODULE_0__","url","method","getCompany","addArea","axios__WEBPACK_IMPORTED_MODULE_1___default","a","post","then","res","data","editArea","delArea","getLineList","getVendingDistrict","addLine","editLine","delLine","getPositionList","getVendingLine","getChild","addPosition","editPosition","delPosition","content","__webpack_require__","module","i","locals","exports","add","default","views_sitemapvue_type_script_lang_js_","name","fullHeight","document","documentElement","clientHeight","loadding","markers","zoom","infoWindow","map","BMap","info","lineName","pointName","addName","opts","width","height","title","enableMessage","message","watch","val","this","timer","that","setTimeout","computed","created","methods","handleClick","_ref","_this2","_this","pointposition","response","zhead","reTCode","zbody","datas","rows","position","length","lng","longitude","lat","latitude","db","push","console","log","$notify","retMsg","type","mapClick","b","districtName","adderss","InfoWindow","openInfoWindow","point","mounted","window","onresize","components","BmlMarkerClusterer","_vue_baidu_map_0_21_11_vue_baidu_map","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","style","attrs","center","scroll-wheel-zoom","on","ready","averageCenter","_l","marker","key","Math","random","click","$event","_v","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/4.a13ecc2d115ed3d729ae.js","sourcesContent":["import mod from \"-!../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@0.28.11@css-loader/index.js??ref--10-2!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--10-3!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--10-4!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6e72647a&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js!../../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@0.28.11@css-loader/index.js??ref--10-2!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--10-3!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--10-4!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6e72647a&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"","import request from '@/utils/request'\nimport axios from 'axios'\nlet base = process.env.API_HOST//''///manage\n/*\n    区域管理\n*/\nexport function getList(params) {//查询区域\n  return request({\n    url: base+'/vendingDistrict/list',\n    method: 'get',\n    params\n  })\n}\n//托管公司查询\nexport function getCompany(params) {\n  return request({\n    url: base+'/corp/vaguelist',\n    method: 'get',\n    params\n  })\n}\n//添加区域\nexport const addArea = params =>{\n\t  return axios.post(base + `/vendingDistrict/add`, params).then(res => res.data)\n}\n//编辑区域\nexport const editArea = params =>{\n    return axios.post(base + `/vendingDistrict/edit`, params).then(res => res.data)\n}\n\n//删除区域\nexport const delArea = params =>{\n    return axios.post(base + `/vendingDistrict/remove`, params).then(res => res.data)\n}\n\n\n/*\n    线路管理\n*/\n\nexport function getLineList(params) {//查询线路\n  return request({\n    url: base+'/vendingLine/list',\n    method: 'get',\n    params\n  })\n}\nexport function getVendingDistrict(params) {//获取全部区域\n  return request({\n    url: base+'/vendingDistrict/listAll',\n    method: 'get',\n    params\n  })\n}\n//添加线路\nexport const addLine = params =>{\n    return axios.post(base + `/vendingLine/add`, params).then(res => res.data)\n}\n//编辑线路\nexport const editLine = params =>{\n    return axios.post(base + `/vendingLine/edit`, params).then(res => res.data)\n}\n\n//删除线路\nexport const delLine = params =>{\n    return axios.post(base + `/vendingLine/remove`, params).then(res => res.data)\n}\n\n\n/*\n      点位管理\n*/ \n//查询点位\nexport function getPositionList(params) {\n  return request({\n    url: base+'/vendingPoint/list',\n    method: 'get',\n    params\n  })\n}\n\n//查询所有线路\nexport function getVendingLine(params) {\n  return request({\n    url: base+'/vendingLine/listAll',\n    method: 'get',\n    params\n  })\n}\n//查询所有省市区\nexport function getChild(params) {\n  return request({\n    url: base+'/dispatch/getChild',\n    method: 'get',\n    params\n  })\n}\n//添加点位\nexport const addPosition = params =>{\n    return axios.post(base + `/vendingPoint/add`, params).then(res => res.data)\n}\n//编辑点位\nexport const editPosition = params =>{\n    return axios.post(base + `/vendingPoint/edit`, params).then(res => res.data)\n}\n\n//删除点位\nexport const delPosition = params =>{\n    return axios.post(base + `/vendingPoint/remove`, params).then(res => res.data)\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@0.28.11@css-loader/index.js??ref--10-2!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--10-3!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--10-4!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6e72647a&rel=stylesheet%2Fscss&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8fb7f9e0\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dashboard-container\"},[_c('baidu-map',{staticClass:\"map\",style:({height:_vm.fullHeight}),attrs:{\"center\":\"中国\",\"scroll-wheel-zoom\":true},on:{\"ready\":_vm.handleClick}},[_c('bml-marker-clusterer',{attrs:{\"averageCenter\":true}},[_vm._l((_vm.markers),function(marker){return _c('bm-marker',{key:Math.random(),attrs:{\"position\":{lng:  marker.lng, lat: marker.lat}},on:{\"click\":function($event){_vm.mapClick(this,marker)}}})}),_vm._v(\":\\n    \")],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"dashboard-container\">\n     <baidu-map class=\"map\" center=\"中国\" :scroll-wheel-zoom=\"true\" @ready=\"handleClick\" :style=\"{height:fullHeight}\"> \n      <bml-marker-clusterer :averageCenter=\"true\">\n        <bm-marker v-for=\"marker of markers\"  :key=\"Math.random()\" :position=\"{lng:  marker.lng, lat: marker.lat}\" @click=\"mapClick(this,marker)\"></bm-marker>:\n      </bml-marker-clusterer>\n    </baidu-map>\n  </div>\n</template>\n<script>\nimport { BmlMarkerClusterer } from 'vue-baidu-map'\nimport { getPositionList } from '@/api/pointposition'\nexport default {\n  name: 'sitemap',\n  data() {\n      return {\n        fullHeight:document.documentElement.clientHeight-100+\"px\",\n        loadding:true,\n        markers: [],\n        zoom:1,\n        infoWindow:null,\n        map:null,\n        BMap:null,\n        info:{\n          name:\"\",\n          lineName:\"\",\n          pointName:\"\",\n          addName:\"\"\n\n        },\n        opts : {\n          width : 400,     // 信息窗口宽度\n          height: 150,     // 信息窗口高度\n          title : \"详细信息\" , // 信息窗口标题\n          enableMessage:true,//设置允许信息窗发送短息\n          message:\"亲耐滴，晚上一起吃个饭吧？戳下面的链接看下地址喔~\"\n        }\n\n      };\n  },\n  watch: {\n      fullHeight (val) {\n        if(!this.timer) {\n          this.fullHeight = val\n          this.timer = true\n          let that = this\n          setTimeout(function (){\n            that.timer = false\n          },400)\n        }\n      }\n    },\n  computed: {\n   \n  },\n  created() {\n  },\n  methods: {\n      handleClick({BMap, map}) {\n          this.map = map\n          this.BMap = BMap\n          var _this = this;\n          const listQuery = {\n          }\n          getPositionList(listQuery).then(response => {\n            if(response.zhead.reTCode===\"0000\"){\n              var data = response.zbody.datas.rows\n              var position=null\n              for (let i = 0; i < data.length; i++) {\n                position = { lng:data[i].longitude, lat:data[i].latitude,db:data[i]}\n                _this.markers.push(position)\n              }\n            console.log(\"地图数据：\",response)\n            }else{\n               this.$notify({\n                  title: '失败',\n                  message: res.zhead.retMsg,\n                  type: 'error'\n                });\n            }\n         \n          })\n      },\n      mapClick(a,b) {\n          console.log(b)\n          this.info.name = b.db.name;\n          this.info.lineName = b.db.lineName\n          this.info.pointName= b.db.districtName;\n          this.info.addName = b.db.adderss;\n          this.infoWindow = new BMap.InfoWindow(\"点位名称：\"+this.info.name+\"<br/>线路：\"+this.info.lineName+\"<br/>区域：\"+this.info.pointName+\"<br/>位置：\"+this.info.addName, this.opts);  // 创建信息窗口对象 \n          this.map.openInfoWindow(this.infoWindow,a.point);\n      },\n  },\n  mounted () {\n       \n      const that = this\n      window.onresize = () => {\n        return (() => {\n          window.fullHeight = document.documentElement.clientHeight\n          that.fullHeight = window.fullHeight\n          console.log(that.fullHeight)\n        })()\n      }\n\n  },\n  components: {\n     BmlMarkerClusterer\n  },\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>  \n.map {\n\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6e72647a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6e72647a&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.4.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e72647a\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}