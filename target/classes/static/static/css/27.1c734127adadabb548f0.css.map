{"version":3,"sources":["D:/项目管理/售货机/web/web/src/components/table/D:/项目管理/售货机/web/web/src/components/table/D:/项目管理/售货机/web/web/src/components/table/w-table.vue","D:/项目管理/售货机/web/web/src/components/table/D:/项目管理/售货机/web/web/src/components/table/src/components/table/w-table.vue","D:/项目管理/售货机/web/web/src/views/equipment/template/D:/项目管理/售货机/web/web/src/views/equipment/template/src/views/equipment/template/index.vue"],"names":[],"mappings":"AAyME,iBAGG,ACRL,sBACA,wBAAA,CACA,ADGE,gCAEG,kCAAoC,CACpC,AAHH,sBAKI,SAAU,CAsBb,AA3BD,+BAOM,eAAe,AACf,cAAc,AACd,QAAQ,AACR,SAAS,AACT,kBAAkB,AAClB,gBAAgB,AAChB,WAAY,CACb,AAdL,gDAiBM,4BAA4B,AAC5B,UAAW,CACZ,AAnBL,iDAuBM,6BAA6B,AACrC,UAAW,CACJ,AAzBL,qBA6BE,UAAU,AACV,2BAAoB,AAApB,oBAAoB,AACpB,0BAAsB,AAAtB,sBAAsB,AACtB,oBAAiB,AAAjB,iBAAiB,AACjB,eAAe,AACf,gBAAiB,CASlB,AA3CD,4BAoCI,WAAW,AACX,kBAAkB,AAClB,MAAM,AACN,OAAO,AACP,SAAS,AACT,OAAQ,CACT,AA1CH,iDA8CI,qBAAuB,CACxB,AA/CH,yCAiDI,kBAAmB,CACpB,AEXL,gCAAA,eAAA,CAAA,AACA,6BAAA,gBAAA,CAAA,AACA,4BAAA,cAAA,CAAA,AACA,mCAAA,eAAA,WAAA,gBAAA,oBAAA,CAAA,AACA,yCAAA,iBAAA,CAAA,AAEA,sBAAA,eAAA,gBAAA,CAAA,AACA,4BAAA,qBAAA,YAAA,gBAAA,cAAA,CAAA,AACA,iCAAA,qBAAA,iBAAA,CAAA,AACA,mCAAA,qBAAA,kBAAA,kBAAA,aAAA,CAAA,AACA,0CAAA,aAAA,CAAA,AACA,yBAAA,gBAAA,gBAAA,CAAA,AACA,2BAAA,eAAA,eAAA,CAAA,AACA,0BAAA,gBAAA,eAAA,aAAA,CAAA","file":"27.1c734127adadabb548f0.css","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  .w-table {\n  　.el-table .darg_start {\n     background-color: #f3f3f3 !important; \n    }\n    .el-table th {\n      padding: 0;\n      .virtual{\n        position: fixed;\n        display: block;\n        width: 0;\n        height: 0;\n        margin-left: -10px;\n        background: none;\n        border: none;\n      }\n    &.darg_active_left {\n      .virtual {\n        border-left: 2px dotted #666;\n        z-index: 99;\n      }\n    }\n    &.darg_active_right {\n      .virtual {\n        border-right: 2px dotted #666;\nz-index: 99;\n      }\n    }\n  }\n  .thead-cell {\n    padding: 0;\n    display: inline-flex;\n    flex-direction: column;\n    align-items: left;\n    cursor: pointer;\n    overflow: initial;\n    &:before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n    }\n  }\n  &.w-table_moving {\n    .el-table th .thead-cell{\n      cursor: move !important;\n    }\n    .el-table__fixed {\n      cursor: not-allowed;\n    }\n  }\n}\n","      <template>\n       <div class=\"w-table\" :class=\"{'w-table_moving': dragState.dragging}\">\n       <el-table :data=\"data\"\n            :border=\"option.border\"\n            :height=\"option.height\"\n            :max-height=\"option.maxHeight\"\n            :style=\"{ width: parseInt(option.width)+'px' }\"\n            :cell-class-name=\"cellClassName\" \n            :header-cell-class-name=\"headerCellClassName\"\n            :tooltip-effect=\"tooltipEffect\"\n            @row-click=\"clciks\"\n            @selection-change=\"handleSelectionChange\"\n            :header-cell-style=\"getRowClass\"\n          >\n            <slot name=\"fixed\"></slot>\n            <el-table-column v-for=\"(col, index) in tableHeader\" :key=\"index\"\n              :prop=\"col.prop\"\n              :label=\"col.label\"\n              :width=\"col.width\"\n              :min-width=\"col.minWidth\"\n              :type=\"col.type\"\n              :header-align=\"col.headerAlign\"\n              :column-key=\"index.toString()\"\n              :render-header=\"renderHeader\"\n              :show-overflow-tooltip=\"true\"\n\n            >\n            </el-table-column>\n          </el-table>\n        </div>\n        </template>\n<script>\nexport default {\n  watch: {\n    header (val, oldVal) {\n      this.tableHeader = val\n    }\n  },\n  props: {\n    data: {\n      default: function () {\n        return []\n      },\n      type: Array\n    },\n    header: {\n      default: function () {\n        return []\n      },\n      type: Array\n    },\n    option: {\n      default: function () {\n        return {}\n      },\n      type: Object\n    },\n    clciks: {\n      default: function(res) {\n        return {\n          res: ''\n        }\n      },\n      type : Function\n    },\n    handleSelectionChange:{\n       default: function(res) {\n        return {\n          res: ''\n        }\n      },\n      type : Function\n    }\n\n  },\n  methods: {\n    getRowClass({ row, column, rowIndex, columnIndex }) {\n        if (rowIndex == 0) {\n          return 'background:#F5F8FB'\n        } else {\n          return ''\n        }\n    },\n    filterNode(value, data) {\n      if (!value) return true\n      return data.label.indexOf(value) !== -1\n    },\n    renderHeader (createElement, {column}) {\n      return createElement(\n        'div', {\n          'class': ['thead-cell'],\n          on: {\n            mousedown: ($event) => { this.handleMouseDown($event, column) },\n            mousemove: ($event) => { this.handleMouseMove($event, column) }\n          }\n        }, [\n          // 添加 <a> 用于显示表头 label\n          createElement('a', column.label),\n          // 添加一个空标签用于显示拖动动画\n          createElement('span', {\n            'class': ['virtual']\n          })\n        ])\n    },\n    // 按下鼠标开始拖动\n    handleMouseDown (e, column) {\n      this.dragState.dragging = true\n      this.dragState.start = parseInt(column.columnKey)\n      // 给拖动时的虚拟容器添加宽高\n      let table = document.getElementsByClassName('w-table')[0]\n      let virtual = document.getElementsByClassName('virtual')\n      for (let item of virtual) {\n        item.style.height = table.clientHeight - 1 + 'px'\n        item.style.width = item.parentElement.parentElement.clientWidth + 'px'\n      }\n    　document.addEventListener('mouseup', this.handleMouseUp);\n    },\n\n    // 鼠标放开结束拖动\n    handleMouseUp () {\n      this.dragColumn(this.dragState)\n      // 初始化拖动状态\n      this.dragState = {\n        start: -10,\n        end: -10,\n        dragging: false,\n        direction: undefined\n      }\n    　document.removeEventListener('mouseup', this.handleMouseUp);\n    },\n\n    // 拖动中\n    handleMouseMove (e, column) {\n      if (this.dragState.dragging) {\n        let index = parseInt(column.columnKey) // 记录起始列\n        if (index - this.dragState.start !== 0) {\n          this.dragState.direction = index - this.dragState.start < 0 ? 'left' : 'right' // 判断拖动方向\n          this.dragState.end = parseInt(column.columnKey)\n        } else {\n          this.dragState.direction = undefined\n        }\n      } else {\n        return false\n      }\n    },\n\n    // 拖动易位\n    dragColumn ({start, end, direction}) {\n      let tempData = []\n      let left = direction === 'left'\n      let min = left ? end : start - 1\n      let max = left ? start + 1 : end\n      for (let i = 0; i < this.tableHeader.length; i++) {\n        if (i === end) {\n          tempData.push(this.tableHeader[start])\n        } else if (i > min && i < max) {\n          tempData.push(this.tableHeader[ left ? i - 1 : i + 1 ])\n        } else {\n          tempData.push(this.tableHeader[i])\n        }\n      }\n      this.tableHeader = tempData\n    },\n\n    headerCellClassName ({column,columnIndex},any) {\n        let active = columnIndex - 0 === this.dragState.end ? `darg_active_${this.dragState.direction}` : ''\n        let start = columnIndex - 0 === this.dragState.start ? `darg_start` : ''\n        return `${active} ${start}`\n    },\n\n    cellClassName ({column,columnIndex},any) {\n        return (columnIndex - 0 === this.dragState.start ? `darg_start` : '')\n    }\n  },\n  data() {\n    return {\n      tooltipEffect:\"dark\",\n      tableHeader: this.header,\n      dragState: {\n        start: -9, // 起始元素的 index\n        end: -9, // 移动鼠标时所覆盖的元素 index\n        dragging: false, // 是否正在拖动\n        direction: undefined // 拖动方向\n      },\n      filterText: ''\n    }\n  },\n  created:function(){\n\n    \n  },\n  mounted () {\n  }\n}\n</script>\n<style>\n   .el-table .darg_start {\n     background-color: #f3f3f3; \n    }\n</style>\n<style  lang=\"scss\">\n  .w-table {\n  　.el-table .darg_start {\n     background-color: #f3f3f3 !important; \n    }\n    .el-table th {\n      padding: 0;\n      .virtual{\n        position: fixed;\n        display: block;\n        width: 0;\n        height: 0;\n        margin-left: -10px;\n        background: none;\n        border: none;\n      }\n    &.darg_active_left {\n      .virtual {\n        border-left: 2px dotted #666;\n        z-index: 99;\n      }\n    }\n    &.darg_active_right {\n      .virtual {\n        border-right: 2px dotted #666;\nz-index: 99;\n      }\n    }\n  }\n  .thead-cell {\n    padding: 0;\n    display: inline-flex;\n    flex-direction: column;\n    align-items: left;\n    cursor: pointer;\n    overflow: initial;\n    &:before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n    }\n  }\n  &.w-table_moving {\n    .el-table th .thead-cell{\n      cursor: move !important;\n    }\n    .el-table__fixed {\n      cursor: not-allowed;\n    }\n  }\n}\n</style>","<template>\n <div class=\"div-warp\">\n    <div class=\"search-warp\">\n                \n                    <strong>模版名称：</strong>\n                    <el-select v-model=\"value\" style=\"float:left; margin-right: 30px;\" size=\"medium\" placeholder=\"请选择模板\">\n                      <el-option\n                        v-for=\"item in options\"\n                        :key=\"item.value\"\n                        :label=\"item.label\"\n                        :value=\"item.value\">\n                      </el-option>\n                    </el-select>\n                    <el-input placeholder=\"请输入模板名称\" v-model=\"input10\" class=\"inputStyle\" size=\"medium\" clearable>\n                      </el-input>\n                      <el-button type=\"success\" @click.native.prevent=\"search\" size=\"medium\">查询</el-button>\n                      <el-button type=\"primary\" @click=\"handleAdd\" size=\"medium\">新增</el-button>\n               \n    </div>\n    <div class=\"block-warp\">\n            <wTable :data=\"tableData\" ref=\"multipleTable\" :header=\"tableHeader\"  :option=\"tableOption\">\n              <el-table-column slot=\"fixed\"\n                fixed=\"right\"\n                label=\"操作\"\n                width=\"134\">\n                  <template  scope=\"scope\">\n                    <div>\n                      <el-button type=\"success\" size=\"mini\" icon=\"el-icon-view\" circle></el-button>\n                      <el-button type=\"primary\" size=\"mini\"icon=\"el-icon-edit\" circle @click=\"handleEdit(scope.$index, scope.row)\"></el-button>\n                      <el-button type=\"danger\"  size=\"mini\" icon=\"el-icon-delete\" circle @click.native.prevent=\"deleteRow(scope.$index, tableData)\"></el-button>\n                    </div>\n                  </template>\n              </el-table-column>\n            </wTable>\n          \n            <div class=\"pageBox\">\n              <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                :total=\"1000\">\n              </el-pagination>\n            </div>\n      </div>\n  </div>\n</template>\n<script>\nimport wTable from '@/components/table/w-table.vue'\nexport default {\n  data() {\n        return {\n          form:{},\n          options: [{\n            value: '选项1',\n            label: '宇宙星空科技'\n          }],\n          value: '',\n          radio:'已认证',\n          formLabelWidth: '120px',\n          dialogAddTableVisible:false,//控制新增弹出显示隐藏\n          dialogEditTableVisible:false,//控制编辑弹出显示隐藏\n          input10:'',\n          tableOption:{\n            border: true\n          },\n          tableHeader: [\n              {\n                type:\"selection\"\n              },\n              {\n                prop: 'name',\n                label: '模版名称',\n                width: '178',\n                sortable: true,\n                sortMethod: this.handleNameSort\n              },\n              {\n                prop: 'province',\n                label: '厂家',\n                minWidth: '120'\n              }, {\n                prop: 'name',\n                label: '货柜类型',\n                 minWidth: '200'\n             \n              }, {\n                prop: 'city',\n                label: '创建时间',\n                minWidth: '120'\n              }\n          ],\n          tableData: [\n              {\n                date: '2016-05-03',\n                name: '0001',\n                province: '宇宙星空科技',\n                city: '2018-09-08',\n                address: '上海市普陀区金沙江路 1518 弄',\n                zip: '弹簧柜'\n              }, {\n                date: '2016-05-02',\n                name: '0002',\n                province: '宇宙星空科技',\n                city: '13522347461',\n                address: '上海市普陀区金沙江路 1518 弄',\n                zip: '饮料柜'\n              }, {\n                date: '2016-05-04',\n                name: '0003',\n                province: '宇宙星空科技',\n                city: '13522347461',\n                address: '上海市普陀区金沙江路 1518 弄',\n                zip: 200333\n              }, {\n                date: '2016-05-01',\n                name: '0004',\n                province: '宇宙星空科技',\n                city: '13522347461',\n                address: '上海市普陀区金沙江路 1518 弄',\n                zip: 200333\n              }\n          ],\n          filterText: '',\n          addForm: {\n              area_id:'',\n              name:'',\n              contact:'',\n              region: '',\n              area: '',\n              date2: '',\n              delivery: false,\n              type: [],\n              resource: '',\n              desc: ''\n          },\n          Rules:{\n              area_id:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ],\n              area:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ]\n              ,\n              name:[\n                 { required: true, message: '请选择活负责人姓名', trigger: 'change' }\n              ],\n              contact:[\n                { required: true, message: '请输入活动名称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n              ]\n          },\n          editForm: {\n              area_id:'',\n              name:'',\n              contact:'',\n              region: '',\n              area: '',\n              date2: '',\n              delivery: false,\n              type: [],\n              resource: '',\n              desc: ''\n          }\n        }\n  },\n  watch: {\n    filterText(val) {\n      this.$refs.tree2.filter(val)\n    }\n  },\n  methods: {\n    importBnt(){\n      this.dialogFormVisible= true\n    },\n    search(){//查询\n      console.log('---搜索----')\n    },\n    deleteRow(index, rows) {//删除数据\n      this.$confirm('确认提交吗？', '提示', {}).then(() => {\n           rows.splice(index, 1);\n      });\n    },\n    handleAdd() {//显示新增窗口\n        this.$router.push(\n          {path:'/template/addTemplate'}\n        );\n    },\n    handleEdit(index, row) {//显示编辑窗口\n     this.dialogEditTableVisible= true\n     this.editForm = Object.assign({}, row);\n    },\n    addSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n\n\n          });\n            //this.dialogAddTableVisible = false\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n    editSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n\n\n          });\n            //this.dialogAddTableVisible = false\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n    resetForm(formName) {//重置表单\n        this.$refs[formName].resetFields();\n    },\n    handleClick(tab, event) {\n        console.log(tab, event);\n    },\n    handleChange(file, fileList) {\n      this.fileList3 = fileList.slice(-3);\n    }\n  },\n\n  mounted () {\n    \n  },\n  components: {\n    wTable\n  }\n}\n</script>\n<style scoped>\n  .operation-box{padding-top:4px;}\n  .screen-box{padding: 0px 0 20px 0}\n  .selectBox{padding:10px 0;}\n  .selectBox strong{font-size:14px;color:#333; font-weight: normal; display: inline-block; }\n  .selectBox .select-left{ padding-left:10px; }\n\n  .tit{font-size:12px; line-height: 30px;}\n  .num-right{display: inline-block;float: right; margin-top: 11px; font-size:12px;}\n  .num-right span{ display: inline-block; padding-left: 20px; }\n  .num-right span i{ display: inline-block; padding-left:10px; font-style:normal; color:#006BC2; }\n  .num-right span i.Danger{color:#F56C6C;}\n  .bntBox{overflow: hidden; padding:0px 0 10px 0;}\n  .div-warp{padding:0 20px;  overflow: hidden;}\n  .pageBox{background: #fff; padding:20px 0; margin:20px 0;}\n</style>"]}