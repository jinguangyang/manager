{"version":3,"sources":["D:/项目管理/售货机/web/web/src/views/pointposition/line/D:/项目管理/售货机/web/web/src/views/pointposition/line/src/views/pointposition/line/add.vue"],"names":[],"mappings":"AAiJA,kCAAA,UAAA,CAAA,AACA,2BAAA,WAAA,CAAA,AACA,gCAAA,kBAAA,CAAA","file":"9.ce3c92c97f51401a3043.css","sourcesContent":["<template>\n <div class=\"div-warp\">\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>新增区域</span>\n        </div>\n        <el-form :model=\"addForm\" :rules=\"Rules\" class=\"formWidth\" ref=\"addForm\" @submit.prevent=\"onSubmit\" >\n          <el-form-item label=\"线路编号\" prop=\"code\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.code\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"线路名称\" prop=\"name\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.name\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"区域编号\" prop=\"districtId\" size=\"small\" :label-width=\"formLabelWidth\">\n              <el-select v-model=\"addForm.districtId\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in regionList\"\n                  :key=\"item.districtId\"\n                  :label=\"item.name\"\n                  :value=\"item.districtId\">\n                </el-option>\n              </el-select>\n          </el-form-item>\n         \n          <el-form-item label=\"描述\"  size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input type=\"textarea\" v-model=\"addForm.description\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"ReturnLevel\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addSubmitForm('addForm')\">确 定</el-button>\n        </div>\n      </el-card>\n  </div>\n</template>\n<script>\nimport {addLine,getVendingDistrict} from '@/api/pointposition'\nimport NProgress from 'nprogress'\nexport default {\n  data() {\n        return {\n          regionList:[],//区域列表\n          restaurants: [],\n          companyName: '',\n          timeout:  null,\n          formLabelWidth: '120px',\n          addForm: {\n              name:'',\n              code:'',\n              districtId: '',\n              longitude:'',\n              latitude:'',\n              description: ''\n          },\n          Rules:{\n              code:[\n                { required: true, message: ' ', trigger: 'blur' },\n              ],\n              name:[\n                 { required: true, message: ' ', trigger: 'blur' }\n              ],\n              districtId:[\n                 { required: true, message: ' ', trigger: 'blur' }\n              ]\n          }\n        }\n  },\n  watch: {\n   \n  },\n  methods: {\n    ReturnLevel(){\n      this.$router.push(\n              {path:'/pointposition/line'}\n      );\n    },\n    addSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n                      NProgress.start();\n                      let para = Object.assign({}, this.addForm);\n                      addLine(para).then((res) => {\n                            if(res.zhead.reTCode==\"0000\"){\n                            NProgress.done();\n                            this.$notify({\n                              title: '成功',\n                              message: res.zhead.retMsg,\n                              type: 'success'\n                            });\n                            this.$refs['addForm'].resetFields();\n                            this.$router.push(\n                                  {path:'/pointposition/line'}\n                            );\n                            }else{\n                              this.$notify({\n                                title: '失败',\n                                message: res.zhead.retMsg,\n                                type: 'error'\n                              });\n                          }\n                      });\n          });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n   \n    resetForm(formName) {//重置表单\n        this.$refs[formName].resetFields();\n    },\n    getData() {\n      var _this = this;\n      this.listLoading = true\n      const listQuery = {\n      }\n      getVendingDistrict(listQuery).then(response => {\n        if(response.zhead.reTCode===\"0000\"){\n        _this.regionList = response.zbody.datas.rows;\n        console.log(\"所有区域\",_this.regionList)\n        }else{\n           this.$notify({\n              title: '失败',\n              message: res.zhead.retMsg,\n              type: 'error'\n            });\n        }\n\n      })\n    }\n   \n  },\n\n  mounted () {\n   this.getData()\n \n  },\n  components: {\n\n  }\n}\n</script>\n<style scoped>\n  .el-autocomplete{width:100%;}\n  .div-warp{margin: 20px;}\n  .dialog-footer{ padding-left:120px;  }\n</style>"]}