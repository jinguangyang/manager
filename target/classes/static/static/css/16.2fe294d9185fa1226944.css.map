{"version":3,"sources":["D:/项目管理/售货机/web/web/src/views/equipment/machine/D:/项目管理/售货机/web/web/src/views/equipment/machine/src/views/equipment/machine/edit.vue"],"names":[],"mappings":"AAgUA,mCAAA,eAAA,UAAA,eAAA,CAAA,AACA,0BAAA,gBAAA,eAAA,CAAA,AACA,4BAAA,WAAA,aAAA,iBAAA,CAAA,AACA,4BAAA,eAAA,cAAA,gBAAA,cAAA,CAAA,AACA,kCAAA,aAAA,CAAA,AACA,8BAAA,kBAAA,gBAAA,cAAA,CAAA,AACA,6BAAA,WAAA,UAAA,CAAA,AACA,8BAAA,WAAA,WAAA,CAAA,AACA,4BAAA,mBAAA,eAAA,CAAA,AACA,oCAAA,YAAA,gBAAA,CAAA,AACA,2CAAA,WAAA,eAAA,eAAA,CAAA,AACA,wBACA,eAAA,AACA,WAAA,eAAA,CACA,AACA,0BAAA,cAAA,cAAA,CAAA,AACA,yBACA,eAAA,gBAAA,AACA,UAAA,CACA,AACA,yBACA,gBAAA,CACA,AAEA,yBACA,UAAA,AACA,WAAA,CACA,AAEA,wBACA,WAAA,AACA,aAAA,CACA,AAEA,mEAEA,cAAA,AACA,UAAA,CACA,AAEA,iCACA,UAAA,CACA,AAEA,+BAAA,WAAA,aAAA,CAAA,AACA,2BAAA,eAAA,gBAAA,CAAA,AACA,yBAAA,kBAAA,eAAA,CAAA,AACA,yBAAA,eAAA,CAAA,AACA,6BAAA,WAAA,CAAA,AACA,kCAAA,UAAA,CAAA,AACA,2BAAA,WAAA,CAAA,AACA,gCAAA,kBAAA,CAAA,AACA,4BAAA,SAAA,CAAA,AACA,mCAAA,qBAAA,WAAA,iBAAA,eAAA,eAAA,CAAA,AACA,wCAAA,YAAA,qBAAA,WAAA,iBAAA,CAAA,AACA,oCAAA,4BAAA,CAAA","file":"16.2fe294d9185fa1226944.css","sourcesContent":["<template>\n <div class=\"div-warp\">\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>编辑售货机</span>\n        </div>\n        <el-form :model=\"addForm\" :rules=\"Rules\" class=\"formWidth\"  ref=\"addForm\" @submit.prevent=\"onSubmit\">\n          <el-form-item label=\"售货机编号\" prop=\"siteCode\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.siteCode\" ></el-input>\n          </el-form-item>\n          <el-form-item label=\"售货机名称\" prop=\"siteName\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-input v-model=\"addForm.siteName\" auto-complete=\"off\"  ></el-input>\n          </el-form-item>\n          <el-form-item label=\"厂家\" prop=\"factoryId\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.factoryId\" size=\"small\" placeholder=\"请选择厂家\">\n                <el-option\n                  v-for=\"item in ManufactorOptions\"\n                  :key=\"item.dictCode\"\n                  :label=\"item.dictLabel\"\n                  :value=\"item.dictCode\">\n                </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"货柜类型\" prop=\"cabinetType\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.cabinetType\" size=\"small\" placeholder=\"请选择负责人姓名\">\n               <el-option\n                  v-for=\"item in CabinetOptions\"\n                  :key=\"item.dictCode\"\n                  :label=\"item.dictLabel\"\n                  :value=\"item.dictCode\">\n                </el-option>\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"机型\" prop=\"deviceId\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.deviceId\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option\n                  v-for=\"item in modelOptions\"\n                  :key=\"item.deviceId\"\n                  :label=\"item.deviceId\"\n                  :value=\"item.deviceId\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          \n\n          <el-form-item label=\"点位\"  prop=\"pointId\" size=\"small\"  :label-width=\"formLabelWidth\">\n            <el-autocomplete\n              v-model=\"addForm.name\"\n              :fetch-suggestions=\"querySearchAsync\"\n              value-key=\"name\"\n              placeholder=\"输入搜索点位\"\n              @select=\"handleSelect\"\n\n            ></el-autocomplete>\n          </el-form-item>\n\n\n\n          <el-form-item label=\"网络类型\" prop=\"netWork\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.netWork\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option\n                  v-for=\"item in networkOptions\"\n                  :key=\"item.dictValue\"\n                  :label=\"item.dictLabel\"\n                  :value=\"item.dictValue\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"售卖状态\" prop=\"sellState\" size=\"small\" :label-width=\"formLabelWidth\">\n            <el-select v-model=\"addForm.sellState\" size=\"small\" placeholder=\"请选择负责人姓名\">\n              <el-option\n                  v-for=\"item in stateOptions\"\n                  :key=\"item.dictValue\"\n                  :label=\"item.dictLabel\"\n                  :value=\"item.dictValue\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"支付方式\" size=\"small\" :label-width=\"formLabelWidth\">\n\n             <el-checkbox-group v-model=\"palychek\" @change=\"handleCheckedCitiesChange\">\n              <el-checkbox label=\"1\">支付宝</el-checkbox>\n              <el-checkbox label=\"2\">微信</el-checkbox>\n              <el-checkbox label=\"3\">现金</el-checkbox>\n\n            </el-checkbox-group>\n          </el-form-item>\n          <el-form-item label=\"视频播放\"  size=\"small\" :label-width=\"formLabelWidth\">\n            <el-radio-group v-model=\"addForm.mediaType\" size=\"mini\" >\n              <el-radio label=\"1\" border>支持</el-radio>\n              <el-radio label=\"2\" border>不支持</el-radio>\n            </el-radio-group>\n          </el-form-item>\n\n         \n        </el-form>\n\n      <div class=\"bntBox\">\n          <el-button @click=\"dialogAddTableVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addSubmitForm('addForm')\">提交</el-button>\n      </div>\n      </el-card>\n  </div>\n</template>       \n\n<script>\nimport { addMachine,getMachineSelect,getVendingModel,getPositionList } from '@/api/equipment'\nimport NProgress from 'nprogress'\nexport default {\n  data() {\n        return {\n\n          // 厂家、货柜类型、网络类型、售卖状态查询接口\n\n          ManufactorOptions:[],//厂家列表---下拉\n          CabinetOptions:[],//货柜类型---下拉\n          stateOptions:[],//售卖状态--下拉\n          networkOptions:[],//网络--下拉\n          modelOptions:[],//机型希腊\n          options:[],\n          palychek:[],\n          restaurants:[],//点位\n          companyName: '',\n          value:\"\",\n          input:'',\n          formLabelWidth: '120px',\n          addForm: {\n              siteCode:\"\",  //售货机编码\n              siteName:\"\",  //售货机名称\n              factoryId:\"\", // 厂家编号\n              cabinetType:\"\",  //货柜类型 01:商店机 02:弹簧机 03:格子机\n              deviceId:\"\",  //机型编码\n              districtId:\"\", //区域编号\n              lineId:\"\", //线路编号\n              pointId:\"\", //点位编号:'',\n              pointName:'',//点位名称\n              payType:'', //支付类型 可多选从左到右每一位代表支持一种。(1支付宝 2:微信 3:百度钱包 )\n              mediaType:\"1\", //播放视频 1:支持 2:无\n              netWork:\"\", //网络制式 1:GPRS  2:网口\n              sellState:\"\", //售卖状态 1:可售卖 2:不可售卖\n              description:\"\"  //描述\n          },\n          Rules:{\n              siteCode:[\n                { required: true, message: ' ', trigger: 'change' }\n              ],\n              siteName:[\n                { required: true, message: ' ', trigger: 'change' }\n              ],\n              dictLabel:[\n                { required: true, message: ' ', trigger: 'change' },\n               \n              ],\n              factoryId:[\n                { required: true, message: ' ', trigger: 'change' },\n              ],\n              cabinetType:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              netWork:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              sellState:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              deviceId:[\n                 { required: true, message: ' ', trigger: 'change' },\n              ],\n              pointId:[\n                { required: true, message: ' ', trigger: 'change' },\n              ]\n          }\n         \n        }\n  },\n  watch: {\n   \n  },\n  methods: {\n    handleCheckedCitiesChange(value) {\n        this.addForm.payType = value.join(',')\n    },\n    addSubmitForm(formName) {//提交新增窗口\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\n               NProgress.start();\n                      let para = Object.assign({}, this.addForm);\n                      addMachine(para).then((res) => {\n                            if(res.zhead.reTCode==\"0000\"){\n                            NProgress.done();\n                            this.$notify({\n                              title: '成功',\n                              message: res.zhead.retMsg,\n                              type: 'success'\n                            });\n                            this.$refs['addForm'].resetFields();\n                            this.$router.push(\n                                  {path:'/equipment/machine/index'}\n                            );\n                            }else{\n                              this.$notify({\n                                title: '失败',\n                                message: res.zhead.retMsg,\n                                type: 'error'\n                              });\n                          }\n                      });\n          });\n            //this.dialogAddTableVisible = false\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    },\n   \n    resetForm(formName) {//重置表单\n        this.$refs[formName].resetFields();\n    },\n\n    getMachineSelectList(type) {\n      var _this = this;\n      const listQuery = {\n        dictType:type,\n      }\n      getMachineSelect(listQuery).then(response => {\n         if(response.zhead.reTCode===\"0000\"){\n         \n          NProgress.done();\n          /*\n          字典类型,厂商：sys_factory；货柜类型sys_cabinet_type；网络类型：sys_net_work；售卖状态：sys_sell_state\n          */ \n\n          if(type===\"sys_factory\")\n          {\n            _this.ManufactorOptions= response.zbody.datas.rows;//厂家列表---下拉\n             console.log(\"厂家列表：：\",_this.ManufactorOptions)\n          }\n          else if(type===\"sys_cabinet_type\")\n          {\n             _this.CabinetOptions= response.zbody.datas.rows;//货柜类型---下拉\n             console.log(\"货柜类型：：\",_this.CabinetOptions)\n          }\n          else if(type===\"sys_net_work\")\n          {\n              _this.networkOptions= response.zbody.datas.rows;//网络类型---下拉\n              console.log(\"网络类型：：\",_this.networkOptions)\n          }\n          else if(type===\"sys_sell_state\")\n          {\n             _this.stateOptions= response.zbody.datas.rows;//售卖状态--下拉\n             console.log(\"售卖状态：：\",_this.stateOptions)\n          }\n         }else{\n             this.$notify({\n              title: '失败',\n              message: res.zhead.retMsg,\n              type: 'error'\n            });\n         }\n      })\n    },\n    getModel(){\n      var _this = this;\n      const listQuery = {\n      }\n      getVendingModel(listQuery).then(response => {\n           if(response.zhead.reTCode===\"0000\"){\n            _this.modelOptions=response.zbody.datas.rows\n            console.log(\"机型：：\",response.zbody.datas.rows)\n            NProgress.done();\n           }else{\n               this.$notify({\n                title: '失败',\n                message: res.zhead.retMsg,\n                type: 'error'\n              });\n           }\n        })\n    },\n    querySearchAsync(queryString, cb) {//输入搜索点位\n        var restaurants = this.restaurants;\n        var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\n        var _this = this;\n        const listQuery = {\n          name:_this.companyName\n        }\n        getPositionList(listQuery).then(response => {\n          \n          _this.restaurants = response.zbody.datas.rows\n          console.log(_this.restaurants)\n          cb(results);\n        })\n    },\n    createStateFilter(queryString) {\n        return (state) => {\n          return (state.name.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n        };\n    },\n    handleSelect(item) {\n        this.addForm.pointId = item.pointId\n        this.addForm.pointName = item.name\n        console.log(item.pointId);\n    }\n  },\n\n  mounted () {\n        this.getMachineSelectList(\"sys_factory\")\n        this.getMachineSelectList(\"sys_cabinet_type\")\n        this.getMachineSelectList(\"sys_net_work\")\n        this.getMachineSelectList(\"sys_sell_state\")\n        this.getModel()\n  },\n  components: {\n  }\n}\n</script>\n<style scoped>\n.icon-size-circle{ font-size: 60px; color:red; margin-top: 50px;}\n.pageBox{background: #fff; margin-top: 30px;}\n.add-class{width:100%; height: 168px; text-align: center;}\n.icon-size{ font-size: 60px; color:#efefef; margin-top: 50px; cursor: pointer;}\n.icon-size:hover{color:#006CC1;}\n.layerbottom{text-align: center; overflow: hidden; padding:30px 0;}\n.input-left{width:70px;float:left;}\n.input-right{width:70px;float:right;}\n.block-top{background: #efefef; overflow: hidden;}\n.block-top .delBnt{float: right;  margin-right:4px;}\n.block-top .checkbox-left{float: left; margin-top: 4px; margin-left: 4px;}\n.price {\n    font-size: 13px;\n    color: #999; margin-top: 10px;\n  }\n  .price i{ color:#F56C6C; font-size:20px; }\n  .titles {\n    font-size: 14px; margin-top: 10px;\n    color: #333;\n  }\n  .bottom {\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    width: 100%;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n      display: table;\n      content: \"\";\n  }\n  \n  .clearfix:after {\n      clear: both\n  }\n.imgStyel{}\n.imgStyel img{width: 100%; display: block;}\n.layerBox{padding:0 30px; min-width: 1200px;}\n  .bntBox{text-align: center; margin-top: 30px;}\n  .top-20{ margin-top: 20px; }\n  .inputStyle{width:215px;}\n  .el-autocomplete{width:100%;}\n  .div-warp{margin: 20px;}\n  .dialog-footer{ padding-left:120px;  }\n  .searchBox{ padding: 0; }\n  .searchBox strong{ display: inline-block;float: left; line-height: 35px; font-size:14px; font-weight: normal; }\n  .searchBox .inputStyle{width: 200px; display: inline-block;float:left; margin-right: 15px; }\n  .el-dialog__header{border-bottom: 1px solid #000}\n</style>"]}