(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"0isL":function(t,e,r){var i=r("GD5b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,r("hctG").default)("fabbcea0",i,!0,{})},"3uy1":function(t,e,r){"use strict";r.d(e,"m",function(){return l}),r.d(e,"k",function(){return s}),r.d(e,"a",function(){return d}),r.d(e,"g",function(){return c}),r.d(e,"d",function(){return u}),r.d(e,"l",function(){return m}),r.d(e,"o",function(){return f}),r.d(e,"b",function(){return p}),r.d(e,"h",function(){return h}),r.d(e,"e",function(){return g}),r.d(e,"n",function(){return v}),r.d(e,"p",function(){return b}),r.d(e,"j",function(){return y}),r.d(e,"c",function(){return F}),r.d(e,"i",function(){return L}),r.d(e,"f",function(){return D});var i=r("t3Un"),n=r("f0Pt"),o=r.n(n),a="http://localhost:80/system";function l(t){return Object(i.a)({url:a+"/vendingDistrict/list",method:"get",params:t})}function s(t){return Object(i.a)({url:a+"/corp/vaguelist",method:"get",params:t})}var d=function(t){return o.a.post(a+"/vendingDistrict/add",t).then(function(t){return t.data})},c=function(t){return o.a.post(a+"/vendingDistrict/edit",t).then(function(t){return t.data})},u=function(t){return o.a.post(a+"/vendingDistrict/remove",t).then(function(t){return t.data})};function m(t){return Object(i.a)({url:a+"/vendingLine/list",method:"get",params:t})}function f(t){return Object(i.a)({url:a+"/vendingDistrict/listAll",method:"get",params:t})}var p=function(t){return o.a.post(a+"/vendingLine/add",t).then(function(t){return t.data})},h=function(t){return o.a.post(a+"/vendingLine/edit",t).then(function(t){return t.data})},g=function(t){return o.a.post(a+"/vendingLine/remove",t).then(function(t){return t.data})};function v(t){return Object(i.a)({url:a+"/vendingPoint/list",method:"get",params:t})}function b(t){return Object(i.a)({url:a+"/vendingLine/listAll",method:"get",params:t})}function y(t){return Object(i.a)({url:a+"/dispatch/getChild",method:"get",params:t})}var F=function(t){return o.a.post(a+"/vendingPoint/add",t).then(function(t){return t.data})},L=function(t){return o.a.post(a+"/vendingPoint/edit",t).then(function(t){return t.data})},D=function(t){return o.a.post(a+"/vendingPoint/remove",t).then(function(t){return t.data})}},GD5b:function(t,e,r){},khF9:function(t,e,r){"use strict";r.r(e);var i=r("6ZY3"),n=r.n(i),o=r("3uy1"),a=r("OLzz"),l=r.n(a),s={data:function(){return{cityId:"0",corpName:"",lineList:[],regionList:[],restaurants:[],cityList:{countryData:[],ProvinceData:[],cityData:[],DistrictData:[]},companyName:"",timeout:null,formLabelWidth:"120px",editForm:{districtId:"",lineId:"",code:"",name:"",country:"",province:"",city:"",district:"",adderss:"",longitude:"",latitude:"",corpId:""},Rules:{code:[{required:!0,message:" ",trigger:"blur"}],name:[{required:!0,message:" ",trigger:"blur"}],lineId:[{required:!0,message:" ",trigger:"blur"}],corpName:[{required:!0,validator:function(t,e,r){if(!e)return r(new Error(" "));r()},trigger:"change"}],country:[{required:!0,message:" ",trigger:"blur"}],adderss:[{required:!0,message:" ",trigger:"blur"}]}}},watch:{},created:function(){window.localStorage&&(this.editForm=JSON.parse(localStorage.getItem("editData")))},methods:{ReturnLevel:function(){this.$router.push({path:"/pointposition/position"})},addSubmitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("确认提交吗？","提示",{}).then(function(){l.a.start();var t=n()({},e.editForm);Object(o.i)(t).then(function(t){"0000"==t.zhead.reTCode?(l.a.done(),e.$notify({title:"成功",message:t.zhead.retMsg,type:"success"}),e.$refs.editForm.resetFields(),e.$router.push({path:"/pointposition/position"})):e.$notify({title:"失败",message:t.zhead.retMsg,type:"error"})})})})},resetForm:function(t){this.$refs[t].resetFields()},getData:function(){var t=this,e=this;this.listLoading=!0;Object(o.o)({}).then(function(r){"0000"===r.zhead.reTCode?(e.regionList=r.zbody.datas.rows,console.log("所有区域",e.regionList)):t.$notify({title:"失败",message:res.zhead.retMsg,type:"error"})})},getLine:function(){var t=this,e=this;this.listLoading=!0;Object(o.p)({}).then(function(r){"0000"===r.zhead.reTCode?(e.lineList=r.zbody.datas.rows,console.log("所有线路",e.lineList)):t.$notify({title:"失败",message:res.zhead.retMsg,type:"error"})})},querySearchAsync:function(t,e){var r=this.restaurants,i=t?r.filter(this.createStateFilter(t)):r,n=this,a={corpName:n.companyName};Object(o.k)(a).then(function(t){n.restaurants=t.zbody.datas,console.log("所属公司",n.restaurants),e(i)})},createStateFilter:function(t){return function(e){return 0===e.corpName.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.editForm.corpId=t.corpId,this.editForm.corpName=t.corpName,console.log(t)},getChildData:function(t){var e=this,r=this,i="0";"1"==t?i=r.editForm.country:"2"==t?i=r.editForm.province:"3"==t&&(i=r.editForm.city);var n={parentId:i};Object(o.j)(n).then(function(i){"0000"===i.zhead.reTCode?("1"==t?r.cityList.ProvinceData=i.zbody.datas.rows:"2"==t?r.cityList.cityData=i.zbody.datas.rows:"3"==t?r.cityList.DistrictData=i.zbody.datas.rows:r.cityList.countryData=i.zbody.datas.rows,console.log("行政区.ProvinceData域",r.lineList)):e.$notify({title:"失败",message:res.zhead.retMsg,type:"error"})})}},mounted:function(){this.getData(),this.getLine(),this.getChildData(),this.getChildData("1"),this.getChildData("2"),this.getChildData("3")},components:{}},d=(r("nUrN"),r("mDrr")),c=Object(d.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"div-warp"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("新增区域")])]),t._v(" "),r("el-form",{ref:"editForm",staticClass:"formWidth",attrs:{model:t.editForm,rules:t.Rules},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("el-form-item",{attrs:{label:"点位编号",prop:"code",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.code,callback:function(e){t.$set(t.editForm,"code",e)},expression:"editForm.code"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"点位名称",prop:"name",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"线路名称",prop:"lineId",size:"small","label-width":t.formLabelWidth}},[r("el-select",{attrs:{"auto-complete":"off",placeholder:"请选择"},model:{value:t.editForm.lineId,callback:function(e){t.$set(t.editForm,"lineId",e)},expression:"editForm.lineId"}},t._l(t.lineList,function(t){return r("el-option",{key:t.lineId,attrs:{label:t.name,value:t.lineId}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"所属商户",prop:"corpName",size:"small","label-width":t.formLabelWidth}},[r("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,"value-key":"corpName",placeholder:"输入搜索公司"},on:{select:t.handleSelect},model:{value:t.editForm.corpName,callback:function(e){t.$set(t.editForm,"corpName",e)},expression:"editForm.corpName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属行政区域",prop:"country",size:"small","label-width":t.formLabelWidth}},[r("el-select",{attrs:{placeholder:"请选择国家"},on:{change:function(e){t.getChildData("1")}},model:{value:t.editForm.country,callback:function(e){t.$set(t.editForm,"country",e)},expression:"editForm.country"}},t._l(t.cityList.countryData,function(t){return r("el-option",{key:t.logid,attrs:{label:t.name,value:t.logid}})})),t._v(" "),r("el-select",{attrs:{placeholder:"请选择省份或州"},on:{change:function(e){t.getChildData("2")}},model:{value:t.editForm.province,callback:function(e){t.$set(t.editForm,"province",e)},expression:"editForm.province"}},t._l(t.cityList.ProvinceData,function(t){return r("el-option",{key:t.logid,attrs:{label:t.name,value:t.logid}})})),t._v(" "),r("el-select",{attrs:{placeholder:"请选择城市"},on:{change:function(e){t.getChildData("3")}},model:{value:t.editForm.city,callback:function(e){t.$set(t.editForm,"city",e)},expression:"editForm.city"}},t._l(t.cityList.cityData,function(t){return r("el-option",{key:t.logid,attrs:{label:t.name,value:t.logid}})})),t._v(" "),r("el-select",{attrs:{placeholder:"请选择区"},model:{value:t.editForm.district,callback:function(e){t.$set(t.editForm,"district",e)},expression:"editForm.district"}},t._l(t.cityList.DistrictData,function(t){return r("el-option",{key:t.logid,attrs:{label:t.name,value:t.logid}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"详细地址",prop:"adderss",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.adderss,callback:function(e){t.$set(t.editForm,"adderss",e)},expression:"editForm.adderss"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"经度",prop:"longitude",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.longitude,callback:function(e){t.$set(t.editForm,"longitude",e)},expression:"editForm.longitude"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"维度",prop:"latitude",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.latitude,callback:function(e){t.$set(t.editForm,"latitude",e)},expression:"editForm.latitude"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"remark",size:"small","label-width":t.formLabelWidth}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.editForm.remark,callback:function(e){t.$set(t.editForm,"remark",e)},expression:"editForm.remark"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer"},[r("el-button",{on:{click:t.ReturnLevel}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addSubmitForm("editForm")}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"18c2d3ca",null);c.options.__file="edit.vue";e.default=c.exports},nUrN:function(t,e,r){"use strict";var i=r("0isL");r.n(i).a}}]);
//# sourceMappingURL=13.01a17c18bc5aa7e69346.js.map